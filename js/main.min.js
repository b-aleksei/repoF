!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./js/main.js")}({"./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);n(/*! ./modules/form */"./js/modules/form.js")},"./js/modules/form.js":
/*!****************************!*\
  !*** ./js/modules/form.js ***!
  \****************************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../utils/validation */"./js/utils/validation.js"),a=document.querySelector(".application__title"),i=document.querySelector(".application__text");if(a&&i){var s=new r.Validate(".application__form");s.transferAction=function(e,t){a.innerText=e.config.statusMessages[t].title,i.innerText=e.config.statusMessages[t].text,"success"===t&&e.form.remove()},s.beforeSending=function(){var e=document.createElement("div");e.id="spinner",document.body.append(e),a.parentElement.classList.add("sending-status")},s.afterSending=function(){var e=document.querySelector("#spinner");e&&e.remove(),a.parentElement.classList.remove("sending-status")}}},"./js/utils/phoneMask.js":
/*!*******************************!*\
  !*** ./js/utils/phoneMask.js ***!
  \*******************************/
/*! exports provided: onFocusPhoneInput */function(e,t,n){"use strict";n.r(t),n.d(t,"onFocusPhoneInput",(function(){return a}));var r=function(e){var t=e.target,n="+".concat(7," (___) ___-__-__"),r=0,a=t.value.replace(/\D/g,"");a.length||(a="".concat(7)),t.value="",Array.prototype.forEach.call(n,(function(e){var n=/[_\d]/.test(e)&&a.length>r;t.value+=n?a.charAt(r++):a.length<=r?"":e}))},a=function(e){e.value||(e.value="+".concat(7)),e.addEventListener("input",r),e.addEventListener("blur",i)},i=function e(t){var n=t.target;n.value==="+".concat(7)&&(n.value=""),n.removeEventListener("input",r),n.removeEventListener("blur",e)}},"./js/utils/sendData.js":
/*!******************************!*\
  !*** ./js/utils/sendData.js ***!
  \******************************/
/*! exports provided: sendData */function(e,t,n){"use strict";n.r(t),n.d(t,"sendData",(function(){return r}));var r=function(e){e.beforeSending(e),fetch(e.config.url,{method:"post",body:new FormData(e.form)}).then((function(t){t.ok?(e.transferAction(e,"success"),e.form.reset(),e.form.querySelectorAll("[data-validate]:not(:disabled)").forEach((function(e){e.parentElement.classList.remove("validate")}))):e.transferAction(e,"fail")})).catch((function(){e.transferAction(e,"error")})).finally((function(){e.afterSending()}))}},"./js/utils/validation.js":
/*!********************************!*\
  !*** ./js/utils/validation.js ***!
  \********************************/
/*! exports provided: Validate */function(e,t,n){"use strict";n.r(t),n.d(t,"Validate",(function(){return u}));var r=n(/*! ./phoneMask */"./js/utils/phoneMask.js"),a=n(/*! ./sendData */"./js/utils/sendData.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={regEmail:/^\s*[\w.-]+@[\w-]+\.(?:[\w-]+\.)?[A-Za-z]{2,8}\s*$/},o={required:"Поле не должно быть пустым",phone:"Недостаточно цифр",email:"Некорректный email"},c={success:"Заявка успешно отправлена",fail:"Удаленный сервер не найден",error:"Сетевая ошибка, проверьте интернет соединение"};fetch("data/errorMes.json").then((function(e){return e.json()})).then((function(e){return Object.assign(o,e)})).catch((function(){})),fetch("data/statusMes.json").then((function(e){return e.json()})).then((function(e){return Object.assign(c,e)})).catch((function(){}));var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form="string"==typeof t?document.querySelector(t):t,this.form instanceof HTMLElement&&(this.defaultConfig={url:"https://jsonplaceholder.typicode.com/posts",classError:"form-invalid",statusMessages:c},this.config=Object.assign(this.defaultConfig,n),this.init())}var t,n,u;return t=e,(n=[{key:"init",value:function(){this.form.addEventListener("focusin",this),this.form.addEventListener("focusout",this),this.form.addEventListener("click",this),this.form.addEventListener("submit",this)}},{key:"handleEvent",value:function(e){var t=this;switch(e.type){case"focusin":e.target.hasAttribute("data-validate")&&"phone"===e.target.dataset.validate&&Object(r.onFocusPhoneInput)(e.target);break;case"focusout":e.target.hasAttribute("data-validate")&&this.checkValue(e.target);break;case"click":e.target.closest('[type="submit"]')&&(e.currentTarget.querySelectorAll("[data-validate]:not([disabled])").forEach((function(e){e.parentElement.classList.add("validate"),t.checkValue(e)})),this.form.checkValidity()||(this.form.addEventListener("animationend",this),this.form.classList.add(this.config.classError)));break;case"submit":e.preventDefault(),Object(a.sendData)(this);break;case"animationend":this.form.classList.remove(this.config.classError),this.form.removeEventListener("animationend",this)}}},{key:"setErrorMes",value:function(e,t){var n=e.parentElement.querySelector("[data-error]");n&&(n.dataset.error=t),e.setCustomValidity(t)}},{key:"checkValue",value:function(e){if(e.setCustomValidity(""),e.parentElement.classList.remove("valid"),e.parentElement.classList.add("validate"),e.value||!e.required)if("email"!==e.dataset.validate||(e.value=e.value.trim(),!e.value||s.regEmail.test(e.value))){if("phone"===e.dataset.validate){var t=e.value.replace(/\D/g,"").length;if(e.value&&t<11)return void this.setErrorMes(e,o.phone)}e.parentElement.classList.add("valid")}else this.setErrorMes(e,o.email);else this.setErrorMes(e,o.required)}},{key:"beforeSending",value:function(){}},{key:"afterSending",value:function(){}},{key:"transferAction",value:function(){}}])&&i(t.prototype,n),u&&i(t,u),e}()}});